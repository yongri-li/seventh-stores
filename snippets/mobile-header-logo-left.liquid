<header class="lg:hidden relative z-50">
  <nav aria-label="Top" class="mx-auto p-4 sm:px-6">
    <div class="">
      <div class="flex items-center">
        <!-- Mobile menu toggle, controls the 'mobileMenuOpen' state. -->
        <div class="flex flex-1 justify-start">
          <div class="ml-1">
            {%- if section.settings.logo != blank -%}
              <a
                href="/"
                itemprop="url"
                class="[ block ]"
                style="max-width: {{ section.settings.logo_max_width_desktop }}px;"
              >
                {% capture image_size %}{{ section.settings.logo_max_width_desktop }}{% endcapture %}
                <img
                  class="header-logo"
                  loading="lazy"
                  src="{{ section.settings.logo | image_url: width: image_size }}"
                  width="{{ section.settings.logo.width }}"
                  height="{{ section.settings.logo.height }}"
                  srcset="{{ section.settings.logo | image_url: width: image_size }} 1x, {{ section.settings.logo | image_url: width: image_size, scale: 2 }} 2x"
                  alt="{{ section.settings.logo.alt | default: shop.name }}"
                  itemprop="logo"
                >
              </a>
            {%- else -%}
              <a href="/" itemprop="url" class="heading text-lg header-font-color [ block ] ">
                {{ shop.name }}
              </a>
            {%- endif -%}
          </div>
        </div>

        <div class="flex flex-1 flex-shrink justify-end">
          <!-- lightning menu -->
          {%- if section.settings.show_lightning_nav -%}
            <lightning-toggle class="lightning-toggle px-1 py-2">
              <span x-cloak class="lightning-toggle__active">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="24"
                  width="24"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
              </span>
              <span x-cloak class="lightning-toggle__disabled">
                <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                </svg>
              </span>
            </lightning-toggle>
          {%- endif -%}

          <!-- customer links -->
          {%- if shop.customer_accounts_enabled -%}
            <div class="ml-2 h-8 items-center">
              {%- if section.settings.account_type == 'links' -%}
                <a
                  href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}"
                  class="text-xs header-font-color heading"
                >
                  {% if customer -%}
                    {{- 'layout.customer.account' | t -}}
                  {%- else -%}
                    {{- 'layout.customer.log_in' | t -}}
                  {%- endif -%}
                </a>
                {%- unless customer -%}
                  <span class="h-2 inline-block w-px mx-2 bg-gray-200" aria-hidden="true"></span>
                  <a href="{{ routes.account_register_url }}" class="text-xs px-1 py-2  header-font-color heading">
                    {{- 'layout.customer.create_account' | t -}}
                  </a>
                {%- endunless -%}
              {%- else -%}
                <a
                  href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}"
                  class="[ px-1 py-2 block text-xs ] header-font-color heading"
                >
                  {%- render 'icon-account' -%}
                </a>
              {%- endif -%}
            </div>
          {%- endif -%}

          <!-- Search -->
          <div class="flex ml-2 h-8 items-center">
            <search-trigger>
              <span class="px-1 py-2 block cursor-pointer">
                <span class="sr-only">Search</span>
                <span data-open-icon class="header-font-color">
                  {% render 'icon-search' %}
                </span>
                <span data-close-icon class="hidden header-font-color">
                  {% render 'icon-close' %}
                </span>
              </span>
            </search-trigger>
          </div>

          <!-- Cart -->
          <div class="flex ml-2 h-8 items-center">
            <drawer-trigger data-target="[data-mini-cart]" data-open-class="flex" data-close-class="hidden">
              <a href="/cart" class="group px-1 py-2 block items-center relative">
                <span class="flex header-font-color">
                  <!-- Heroicon name: outline/shopping-bag -->
                  {%- render 'icon-bag' -%}
                  <span
                    data-cart-count
                    class="bg-black rounded-full h-[14px] w-[14px] text-center leading-[14px] text-white text-[8px] absolute -right-1 top-0 pr-1"
                  >
                    {{- cart.item_count -}}
                  </span>
                  <span class="sr-only">items in cart, view bag</span>
                </span>
              </a>
            </drawer-trigger>
          </div>

          <!-- Mobile Menu -->
          <div class="flex ml-2 h-8 items-center">
            <drawer-trigger
              class="group"
              data-target="[data-menu-drawer]"
              data-open-class="active"
              data-close-class=""
            >
              <button type="button" class="px-1 py-2 flex rounded-md justify-center items-center header-font-color">
                <span class="sr-only">Open menu</span>
                <span class="mr-3">{{ 'layout.header.menu' | t }}</span>
                <div>
                  <span
                    class="[ block w-4 h-[1px] mb-1 transition-transform ease-in duration-300 group-[.active]:rotate-45 group-[.active]:translate-y-[2px] ] menu__bars"
                  ></span>
                  <span
                    class="[ block w-4 h-[1px] transition-transform ease-in duration-300 group-[.active]:-rotate-45 group-[.active]:translate-y-[-3px] ] menu__bars"
                  ></span>
                </div>
              </button>
            </drawer-trigger>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
